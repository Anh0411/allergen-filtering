{% extends 'base.html' %}
{% block content %}
<div class="min-h-screen bg-gradient-to-br from-yellow-50 to-orange-50">
    <!-- Header -->
    <div class="bg-white shadow-sm border-b border-yellow-200">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6">
            <div class="flex justify-between items-center">
                <div>
                    <h1 class="text-3xl font-bold text-gray-900">Recipe Allergen Filter</h1>
                    <p class="text-gray-600 mt-1">Find safe recipes based on your dietary needs</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <!-- Search Form Component -->
        {% include 'components/search_form.html' %}

        <!-- Statistics Component -->
        {% include 'components/statistics.html' %}

        <!-- Recipe Grid -->
        <div id="recipeGrid" class="relative">
            <!-- Loading Overlay Component -->
            {% include 'components/loading_overlay.html' %}

            {% if page_obj.object_list %}
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6">
                    {% for recipe in page_obj.object_list %}
                        <!-- Recipe Card Component -->
                        {% include 'components/recipe_card.html' with recipe=recipe %}
                    {% endfor %}
                </div>

                <!-- Pagination Component -->
                {% include 'components/pagination.html' %}

            {% else %}
                <!-- Empty State Component -->
                {% include 'components/empty_state.html' %}
            {% endif %}
        </div>
    </div>
</div>

<!-- Shared Components -->
{% include 'components/shared/toast.html' %}
{% include 'components/shared/utilities.html' %}

<script>
document.addEventListener('DOMContentLoaded', function() {
    // Global loading state management
    const loadingOverlay = document.getElementById('loadingOverlay');
    
    function showLoading() {
        if (loadingOverlay) {
            loadingOverlay.classList.remove('hidden');
        }
    }

    function hideLoading() {
        if (loadingOverlay) {
            loadingOverlay.classList.add('hidden');
        }
    }

    // Listen for form submission to show loading
    const searchForm = document.getElementById('searchForm');
    if (searchForm) {
        searchForm.addEventListener('submit', function() {
            showLoading();
        });
    }

    // Hide loading when page is fully loaded
    window.addEventListener('load', function() {
        hideLoading();
    });
});
</script>
{% endblock %} 