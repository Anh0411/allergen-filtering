{% comment %}
Risk Level Badge Component
Usage: {% include 'components/shared/risk_badge.html' with risk_level=recipe.analysis_result.risk_level detected_allergens=recipe.analysis_result.detected_allergens %}
Parameters:
- risk_level: 'low', 'medium', 'high', 'critical', or any other value
- detected_allergens: dictionary of detected allergens (optional)
- size: 'sm', 'md', 'lg' (default: 'md')
- show_count: boolean to show allergen count (default: true)
{% endcomment %}

{% load static %}

{% if risk_level == 'low' %}
<div class="flex items-center space-x-2">
    <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800 border border-green-200">
        <span class="w-2 h-2 bg-green-400 rounded-full mr-1"></span>
        ‚úÖ Low Risk
    </span>
    <span class="text-xs text-green-600 font-medium">
        {% if detected_allergens %}
            {{ detected_allergens|length }} allergen{% if detected_allergens|length != 1 %}s{% endif %} detected
        {% else %}
            No allergens detected
        {% endif %}
    </span>
</div>
{% elif risk_level == 'medium' %}
<div class="flex items-center space-x-2">
    <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800 border border-yellow-200">
        <span class="w-2 h-2 bg-yellow-400 rounded-full mr-1"></span>
        ‚ö†Ô∏è Caution
    </span>
    <span class="text-xs text-yellow-600 font-medium">
        {% if detected_allergens %}
            {{ detected_allergens|length }} allergen{% if detected_allergens|length != 1 %}s{% endif %}
        {% else %}
            Potential allergens
        {% endif %}
    </span>
</div>
{% elif risk_level == 'high' %}
<div class="flex items-center space-x-2">
    <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-orange-100 text-orange-800 border border-orange-200">
        <span class="w-2 h-2 bg-orange-400 rounded-full mr-1"></span>
        ‚ö†Ô∏è High Risk
    </span>
    <span class="text-xs text-orange-600 font-medium">
        {% if detected_allergens %}
            {{ detected_allergens|length }} allergens
        {% else %}
            Multiple allergens
        {% endif %}
    </span>
</div>
{% elif risk_level == 'critical' %}
<div class="flex items-center space-x-2">
    <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800 border border-red-200">
        <span class="w-2 h-2 bg-red-400 rounded-full mr-1"></span>
        üö® Critical
    </span>
    <span class="text-xs text-red-600 font-medium">
        {% if detected_allergens %}
            {{ detected_allergens|length }} major allergens
        {% else %}
            Major allergens
        {% endif %}
    </span>
</div>
{% else %}
<!-- Fallback for recipes without analysis or unknown risk levels -->
<div class="flex items-center space-x-2">
    <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800 border border-gray-200">
        <span class="w-2 h-2 bg-gray-400 rounded-full mr-1"></span>
        ‚ö†Ô∏è Not Analyzed
    </span>
    <span class="text-xs text-gray-600 font-medium">Check ingredients</span>
</div>
{% endif %} 